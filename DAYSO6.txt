#include <iostream>
#include <vector>

using namespace std;

#define FOR(i,a,b) for(int i=a; i<=b; i++)

typedef long long LL;

int main()
{
	int n;
	cin>>n;
	vector<LL> a,f,g,h;
	a.resize(n+1);
	f.resize(n+1);
	g.resize(n+1);
	h.resize(n+1);
	
	FOR(i,1,n)
		cin>>a[i];
	
	f[1] = a[1];
	FOR(i,2,n)
		f[i] = max(f[i-1],a[i]);
	
	g[2] = 2*a[2] + a[1]; 
	FOR(i,3,n)
		g[i] = max(g[i-1],2*a[i] + f[i-1]);
	
	h[3] = 3*a[3] + 2*a[2] + a[1];
	FOR(i,4,n)
		h[i] = max(h[i-1],3*a[i] + g[i-1]);
		
	cout<<h[n]<<endl;
	
	return 0;
}