#include <iostream>
using namespace std;

const int MAX = 1005;
long long a[MAX];
long long prefix[MAX];

int main() {
    int n;
    cin >> n;
    
    for (int i = 1; i <= n; ++i) {
        cin >> a[i];
        prefix[i] = prefix[i - 1] + a[i];
    }

    long long maxSum = -2000000000 * 1LL * 1000; // rất nhỏ

    for (int len = 3; len <= n; len += 3) {
        for (int i = 1; i + len - 1 <= n; ++i) {
            int j = i + len - 1;
            long long sum = prefix[j] - prefix[i - 1];
            if (sum > maxSum)
                maxSum = sum;
        }
    }

    cout << maxSum;
    return 0;
}
